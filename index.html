<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Khayalethu Grocery Store - Future of Community Credit</title>
    <meta name="description" content="Essential groceries on credit for Embalenhle, Secunda, Evander, and surrounding areas.">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    
    <!-- GSAP for Animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

    <style>
        @theme {
            --color-primary: #10b981; /* Emerald-500 */
            --color-primary-dark: #047857; /* Emerald-700 */
            --color-secondary: #064e3b; /* Emerald-900 */
            --font-sans: "Inter", ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            
            --animate-float: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0px); }
        }

        @keyframes scroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        
        .animate-scroll {
            animation: scroll 20s linear infinite;
        }
        
        /* Pause on hover */
        .group:hover .animate-scroll {
            animation-play-state: paused;
        }

        /* Glassmorphism Utilities */
        .glass {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.05);
        }

        .gradient-text {
            background-clip: text;
            -webkit-background-clip: text;
            color: transparent;
            background-image: linear-gradient(to right, #059669, #10b981, #34d399);
        }

        /* Hide elements initially for GSAP */
        .gsap-reveal { visibility: hidden; }
        
        /* Smooth scrolling behavior fixes */
        html { scroll-behavior: smooth; }
        body { overflow-x: hidden; }
    </style>
</head>
<body class="bg-stone-50 text-stone-800 font-sans antialiased selection:bg-emerald-200 selection:text-emerald-900 relative">

    <!-- Preloader -->
    <div id="preloader" class="fixed inset-0 z-[200] bg-stone-50 flex flex-col items-center justify-center">
        <div class="relative w-20 h-20 md:w-24 md:h-24 mb-6">
            <div class="absolute inset-0 bg-emerald-500/30 rounded-2xl blur-xl animate-pulse"></div>
            <div class="relative w-full h-full bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl flex items-center justify-center shadow-2xl">
                <svg class="w-10 h-10 md:w-12 md:h-12 text-white animate-[bounce_1s_infinite]" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                </svg>
            </div>
        </div>
        <div class="w-48 h-1 bg-stone-200 rounded-full overflow-hidden mb-4">
            <div id="loader-bar" class="h-full bg-emerald-500 w-0 rounded-full transition-all duration-300 ease-out"></div>
        </div>
        <div id="preloader-text" class="h-6 text-sm font-bold text-emerald-600 uppercase tracking-widest transition-opacity duration-300">
            Shop Now
        </div>
    </div>
    <script>
        // Immediate Preloader Logic
        (function() {
            const bar = document.getElementById('loader-bar');
            const preloader = document.getElementById('preloader');
            const textEl = document.getElementById('preloader-text');
            let width = 0;
            
            // Text cycling
            const words = ["Shop Now", "Pay Later", "Zero Interest", "Local Trust"];
            let wordIndex = 0;
            
            const textInterval = setInterval(() => {
                if(textEl) {
                    textEl.style.opacity = '0';
                    setTimeout(() => {
                        wordIndex = (wordIndex + 1) % words.length;
                        textEl.innerText = words[wordIndex];
                        textEl.style.opacity = '1';
                    }, 200);
                }
            }, 2000);

            // Fake progress
            const interval = setInterval(() => {
                if(width < 90) {
                    width += Math.random() * 5;
                    if(bar) bar.style.width = width + '%';
                }
            }, 100);

            window.addEventListener('load', () => {
                clearInterval(interval);
                if(bar) bar.style.width = '100%';
                
                // GSAP is loaded in head, so we can use it
                setTimeout(() => {
                    clearInterval(textInterval); // Stop text cycling
                    if(typeof gsap !== 'undefined') {
                        gsap.to(preloader, {
                            opacity: 0,
                            y: -20,
                            duration: 0.8,
                            ease: "power2.inOut",
                            onComplete: () => {
                                preloader.style.display = 'none';
                            }
                        });
                    } else {
                        // Fallback if GSAP fails
                        preloader.style.opacity = '0';
                        setTimeout(() => preloader.style.display = 'none', 500);
                    }
                }, 800); // Small delay to show 100% and let user read final text
            });
        })();
    </script>

    <!-- Ambient Background Blobs -->
    <div class="fixed inset-0 z-0 overflow-hidden pointer-events-none">
        <div class="absolute top-[-10%] left-[-10%] w-96 h-96 bg-emerald-200/30 rounded-full blur-3xl opacity-50 animate-[float_8s_ease-in-out_infinite]"></div>
        <div class="absolute bottom-[10%] right-[-5%] w-[500px] h-[500px] bg-teal-100/40 rounded-full blur-3xl opacity-60 animate-[float_10s_ease-in-out_infinite_reverse]"></div>
    </div>

    <!-- Navigation -->
    <nav class="fixed w-full z-50 top-0 transition-all duration-300" id="navbar">
        <div class="glass mx-4 mt-4 rounded-2xl shadow-sm border border-white/40 max-w-7xl lg:mx-auto">
            <div class="px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16 items-center">
                    <div class="flex items-center">
                        <a href="#" class="flex items-center gap-2 group">
                            <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center text-white font-bold text-lg shadow-lg group-hover:scale-105 transition-transform">K</div>
                            <span class="text-lg font-bold text-stone-900 tracking-tight group-hover:text-emerald-700 transition-colors">Khayalethu</span>
                        </a>
                    </div>
                    
                    <!-- Desktop Menu -->
                    <div class="hidden md:flex items-center space-x-1">
                        <a href="#about" class="px-4 py-2 text-sm font-medium text-stone-600 hover:text-emerald-600 rounded-full hover:bg-emerald-50/50 transition-all">About</a>
                        <a href="#how-it-works" class="px-4 py-2 text-sm font-medium text-stone-600 hover:text-emerald-600 rounded-full hover:bg-emerald-50/50 transition-all">Credit</a>
                        <a href="#products" class="px-4 py-2 text-sm font-medium text-stone-600 hover:text-emerald-600 rounded-full hover:bg-emerald-50/50 transition-all">Essentials</a>
                        <a href="partner.html" class="px-4 py-2 text-sm font-medium text-stone-600 hover:text-emerald-600 rounded-full hover:bg-emerald-50/50 transition-all">Partner</a>
                    </div>

                    <div class="hidden md:flex items-center gap-3">
                        <button id="nav-shop-btn" class="px-5 py-2.5 bg-emerald-100 text-emerald-800 text-sm font-bold rounded-full hover:bg-emerald-200 transition-all flex items-center gap-2">
                            <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                            </svg>
                            Order Online
                        </button>
                        <a href="#contact" class="px-6 py-2.5 bg-stone-900 text-white text-sm font-medium rounded-full hover:bg-emerald-600 hover:shadow-lg hover:shadow-emerald-200 transition-all duration-300 transform hover:-translate-y-0.5">
                            Contact Us
                        </a>
                    </div>

                    <!-- Mobile menu button -->
                    <div class="md:hidden flex items-center">
                        <button id="mobile-menu-btn" class="p-2 text-stone-600 hover:text-emerald-600 focus:outline-none">
                            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Mobile Menu -->
            <div id="mobile-menu" class="hidden md:hidden border-t border-stone-100 bg-white/95 backdrop-blur-xl rounded-b-2xl absolute w-full left-0 top-full shadow-xl">
                <div class="px-4 py-6 space-y-3">
                    <a href="#about" class="block px-4 py-2 text-base font-medium text-stone-600 hover:bg-emerald-50 hover:text-emerald-600 rounded-xl transition-colors">About</a>
                    <a href="#how-it-works" class="block px-4 py-2 text-base font-medium text-stone-600 hover:bg-emerald-50 hover:text-emerald-600 rounded-xl transition-colors">Credit Info</a>
                    <a href="#products" class="block px-4 py-2 text-base font-medium text-stone-600 hover:bg-emerald-50 hover:text-emerald-600 rounded-xl transition-colors">Products</a>
                    <a href="partner.html" class="block px-4 py-2 text-base font-medium text-stone-600 hover:bg-emerald-50 hover:text-emerald-600 rounded-xl transition-colors">Partner</a>
                    <button id="mobile-shop-btn" class="w-full text-left block px-4 py-2 text-base font-bold text-emerald-700 bg-emerald-50 hover:bg-emerald-100 rounded-xl transition-colors flex items-center gap-2">
                        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                        </svg>
                        Order Online
                    </button>
                    <a href="#contact" class="block px-4 py-2 text-base font-bold text-stone-900 hover:text-emerald-600 rounded-xl mt-2">Contact Us</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="relative pt-32 pb-20 md:pt-48 md:pb-32 z-10">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            
            <!-- Status Badges -->
            <div class="flex flex-col justify-center items-center gap-3 mb-8 sm:flex-row">
                <div class="hero-anim inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white border border-emerald-100 shadow-sm">
                    <span class="relative flex h-2 w-2">
                      <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"></span>
                      <span class="relative inline-flex rounded-full h-2 w-2 bg-emerald-500"></span>
                    </span>
                    <span class="text-xs font-medium text-stone-500 tracking-wide uppercase">Open for Applications</span>
                </div>
                
                <div class="hero-anim inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white border border-emerald-100 shadow-sm">
                    <svg class="w-3.5 h-3.5 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
                    </svg>
                    <span class="text-xs font-medium text-stone-500 tracking-wide uppercase">We deliver for free</span>
                </div>
                
                <div class="hero-anim inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white border border-emerald-100 shadow-sm">
                    <svg class="w-3.5 h-3.5 text-emerald-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
                    </svg>
                    <span class="text-xs font-medium text-stone-500 tracking-wide uppercase">NCR Compliant</span>
                </div>
            </div>

            <h1 class="hero-anim text-5xl md:text-7xl lg:text-8xl font-bold tracking-tighter text-stone-900 mb-8 leading-[1.1]">
                Groceries when <br>
                <span class="gradient-text">you need them.</span>
            </h1>
            
            <p class="hero-anim max-w-2xl mx-auto text-xl text-stone-500 mb-12 leading-relaxed font-light">
                The modern way to shop for essentials in <span class="text-stone-800 font-medium">Embalenhle</span> & <span class="text-stone-800 font-medium">Secunda</span>. Buy now, pay later. Built on trust.
            </p>
            
            <div class="hero-anim flex flex-col sm:flex-row justify-center gap-4 items-center">
                <a href="#how-it-works" class="group relative px-8 py-4 bg-emerald-600 text-white font-medium rounded-full overflow-hidden transition-all hover:shadow-xl hover:shadow-emerald-200">
                    <div class="absolute inset-0 w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:animate-[shimmer_1.5s_infinite]"></div>
                    <span class="relative flex items-center gap-2">
                        Get Started
                        <svg class="w-4 h-4 transition-transform group-hover:translate-x-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                        </svg>
                    </span>
                </a>
                <a href="#products" class="px-8 py-4 bg-white text-stone-600 border border-stone-200 font-medium rounded-full hover:bg-stone-50 hover:border-stone-300 transition-all">
                    View Essentials
                </a>
            </div>
        </div>
    </section>

    <!-- Stats / Trust Section -->
    <section class="py-12 border-y border-stone-100/50 bg-white/30 backdrop-blur-sm z-10 relative">
        <div class="max-w-6xl mx-auto px-4 grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
            <div class="stat-item opacity-0 translate-y-4">
                <p class="text-3xl font-bold text-stone-900 mb-1"><span class="count-up" data-target="100">0</span>%</p>
                <p class="text-xs uppercase tracking-widest text-stone-500">Local</p>
            </div>
            <div class="stat-item opacity-0 translate-y-4">
                <p class="text-3xl font-bold text-stone-900 mb-1">0%</p>
                <p class="text-xs uppercase tracking-widest text-stone-500">Interest*</p>
            </div>
            <div class="stat-item opacity-0 translate-y-4">
                <p class="text-3xl font-bold text-stone-900 mb-1"><span class="count-up" data-target="24">0</span>h</p>
                <p class="text-xs uppercase tracking-widest text-stone-500">Approval</p>
            </div>
            <div class="stat-item opacity-0 translate-y-4">
                <p class="text-3xl font-bold text-stone-900 mb-1"><span class="count-up" data-target="500">0</span>+</p>
                <p class="text-xs uppercase tracking-widest text-stone-500">Families</p>
            </div>
        </div>
    </section>

    <!-- Modern About Section -->
    <section id="about" class="py-32 relative z-10">
        <div class="max-w-4xl mx-auto px-4 text-center">
            <span class="text-emerald-600 font-semibold tracking-wider text-sm uppercase mb-4 block">Our Mission</span>
            <h2 class="text-3xl md:text-5xl font-bold text-stone-900 mb-8 leading-tight">
                Not just a store. <br>A community lifeline.
            </h2>
            <div class="glass-card p-8 md:p-12 rounded-3xl relative overflow-hidden">
                <div class="absolute top-0 right-0 w-64 h-64 bg-emerald-100/50 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"></div>
                <p class="text-lg md:text-xl text-stone-600 leading-relaxed relative z-10 mb-8">
                    We believe access to food shouldn't be determined by payday. Khayalethu provides a dignified, transparent way to get essentials now and pay later. We are building a financial safety net for the people of Mpumalanga.
                </p>
                <div class="relative z-10 flex justify-center md:justify-start">
                    <button id="open-about-btn" class="inline-flex items-center gap-2 px-6 py-3 bg-white border border-emerald-100 text-emerald-700 font-medium rounded-full hover:bg-emerald-50 hover:shadow-lg hover:shadow-emerald-100 transition-all group">
                        <span>More About Us</span>
                        <svg class="w-4 h-4 transition-transform group-hover:translate-x-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- How It Works - Cards -->
    <section id="how-it-works" class="py-20 relative z-10">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="mb-16 md:flex md:items-end md:justify-between">
                <div class="max-w-xl">
                    <h2 class="text-4xl font-bold text-stone-900 mb-4">Simple Process</h2>
                    <p class="text-stone-500 text-lg">Transparent credit with no hidden fees.</p>
                </div>
            </div>

            <div class="grid md:grid-cols-3 gap-6">
                <!-- Step 1 -->
                <div class="step-card group p-8 rounded-3xl bg-white border border-stone-100 shadow-sm hover:shadow-xl hover:shadow-emerald-100/50 hover:border-emerald-100 transition-all duration-300">
                    <div class="w-12 h-12 bg-stone-100 rounded-2xl flex items-center justify-center text-xl font-bold text-stone-900 mb-6 group-hover:bg-emerald-500 group-hover:text-white transition-colors">1</div>
                    <h3 class="text-xl font-bold text-stone-900 mb-3">Apply In-Store</h3>
                    <p class="text-stone-500 leading-relaxed">Visit us with your ID and proof of residence. We verify details instantly.</p>
                </div>

                <!-- Step 2 -->
                <div class="step-card group p-8 rounded-3xl bg-white border border-stone-100 shadow-sm hover:shadow-xl hover:shadow-emerald-100/50 hover:border-emerald-100 transition-all duration-300">
                    <div class="w-12 h-12 bg-stone-100 rounded-2xl flex items-center justify-center text-xl font-bold text-stone-900 mb-6 group-hover:bg-emerald-500 group-hover:text-white transition-colors">2</div>
                    <h3 class="text-xl font-bold text-stone-900 mb-3">Get Approved</h3>
                    <p class="text-stone-500 leading-relaxed">Receive a credit limit based on your profile. Shop immediately.</p>
                </div>

                <!-- Step 3 -->
                <div class="step-card group p-8 rounded-3xl bg-white border border-stone-100 shadow-sm hover:shadow-xl hover:shadow-emerald-100/50 hover:border-emerald-100 transition-all duration-300">
                    <div class="w-12 h-12 bg-stone-100 rounded-2xl flex items-center justify-center text-xl font-bold text-stone-900 mb-6 group-hover:bg-emerald-500 group-hover:text-white transition-colors">3</div>
                    <h3 class="text-xl font-bold text-stone-900 mb-3">Pay Later</h3>
                    <p class="text-stone-500 leading-relaxed">Settle your account by month-end to increase your limit for next time.</p>
                </div>
            </div>

            <!-- Fair Usage Pill -->
            <div class="mt-12 flex justify-center">
                <div class="inline-flex items-center gap-3 px-6 py-3 rounded-2xl bg-orange-50 border border-orange-100 text-orange-800 text-sm">
                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                    </svg>
                    <span>Late payments result in immediate account suspension.</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Products Bento Grid -->
    <section id="products" class="py-24 bg-white relative z-10">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16">
                <h2 class="text-4xl font-bold text-stone-900 mb-4">Daily Essentials</h2>
                <p class="text-stone-500">Everything you need, always in stock.</p>
            </div>

            <!-- Bento Grid Layout -->
            <div class="grid grid-cols-2 md:grid-cols-4 auto-rows-[180px] gap-4">
                
                <!-- Maize (Large Square) -->
                <div class="product-item group relative col-span-2 row-span-2 rounded-3xl overflow-hidden cursor-default shadow-sm hover:shadow-xl transition-all duration-500">
                    <div class="absolute inset-0 bg-[url('images/maize.jpg')] bg-cover bg-center transition-transform duration-700 group-hover:scale-110"></div>
                    <div class="absolute inset-0 bg-gradient-to-t from-stone-900/90 via-stone-900/20 to-transparent"></div>
                    <div class="absolute bottom-0 left-0 p-6 md:p-8">
                        <span class="text-emerald-400 font-bold tracking-wider text-xs uppercase mb-1 block">Staple</span>
                        <span class="text-3xl font-bold text-white">Maize Meal</span>
                    </div>
                </div>

                <!-- Dairy -->
                <div class="product-item group relative col-span-1 row-span-1 rounded-3xl overflow-hidden cursor-default shadow-sm hover:shadow-xl transition-all duration-500">
                    <div class="absolute inset-0 bg-[url('images/dairy.jpg')] bg-cover bg-center transition-transform duration-700 group-hover:scale-110"></div>
                    <div class="absolute inset-0 bg-gradient-to-t from-stone-900/80 to-transparent"></div>
                    <div class="absolute bottom-0 left-0 p-5">
                        <span class="text-lg font-bold text-white">Dairy</span>
                    </div>
                </div>

                <!-- Bakery -->
                <div class="product-item group relative col-span-1 row-span-1 rounded-3xl overflow-hidden cursor-default shadow-sm hover:shadow-xl transition-all duration-500">
                    <div class="absolute inset-0 bg-[url('images/bakery.jpg')] bg-cover bg-center transition-transform duration-700 group-hover:scale-110"></div>
                    <div class="absolute inset-0 bg-gradient-to-t from-stone-900/80 to-transparent"></div>
                    <div class="absolute bottom-0 left-0 p-5">
                        <span class="text-lg font-bold text-white">Bakery</span>
                    </div>
                </div>

                <!-- Meat (Wide) -->
                <div class="product-item group relative col-span-2 row-span-1 rounded-3xl overflow-hidden cursor-default shadow-sm hover:shadow-xl transition-all duration-500">
                    <div class="absolute inset-0 bg-[url('images/meat.jpg')] bg-cover bg-center transition-transform duration-700 group-hover:scale-110"></div>
                    <div class="absolute inset-0 bg-gradient-to-t from-stone-900/80 via-stone-900/10 to-transparent"></div>
                    <div class="absolute bottom-0 left-0 p-6">
                        <span class="text-emerald-400 font-bold tracking-wider text-xs uppercase mb-1 block">Fresh</span>
                        <span class="text-2xl font-bold text-white">Butcher's Meat</span>
                    </div>
                </div>

                <!-- Oil -->
                <div class="product-item group relative col-span-1 row-span-1 rounded-3xl overflow-hidden cursor-default shadow-sm hover:shadow-xl transition-all duration-500">
                    <div class="absolute inset-0 bg-[url('images/oil.jpg')] bg-cover bg-center transition-transform duration-700 group-hover:scale-110"></div>
                    <div class="absolute inset-0 bg-gradient-to-t from-stone-900/80 to-transparent"></div>
                    <div class="absolute bottom-0 left-0 p-5">
                        <span class="text-lg font-bold text-white">Oil & Fats</span>
                    </div>
                </div>

                <!-- Grains -->
                <div class="product-item group relative col-span-1 row-span-1 rounded-3xl overflow-hidden cursor-default shadow-sm hover:shadow-xl transition-all duration-500">
                    <div class="absolute inset-0 bg-[url('images/grains.jpg')] bg-cover bg-center transition-transform duration-700 group-hover:scale-110"></div>
                    <div class="absolute inset-0 bg-gradient-to-t from-stone-900/80 to-transparent"></div>
                    <div class="absolute bottom-0 left-0 p-5">
                        <span class="text-lg font-bold text-white">Grains</span>
                    </div>
                </div>

                <!-- Hygiene -->
                <div class="product-item group relative col-span-1 row-span-1 rounded-3xl overflow-hidden cursor-default shadow-sm hover:shadow-xl transition-all duration-500">
                    <div class="absolute inset-0 bg-[url('images/hygiene.jpg')] bg-cover bg-center transition-transform duration-700 group-hover:scale-110"></div>
                    <div class="absolute inset-0 bg-gradient-to-t from-stone-900/80 to-transparent"></div>
                    <div class="absolute bottom-0 left-0 p-5">
                        <span class="text-lg font-bold text-white">Hygiene</span>
                    </div>
                </div>

                 <!-- Canned -->
                <div class="product-item group relative col-span-1 row-span-1 rounded-3xl overflow-hidden cursor-default shadow-sm hover:shadow-xl transition-all duration-500">
                    <div class="absolute inset-0 bg-[url('images/canned.jpg')] bg-cover bg-center transition-transform duration-700 group-hover:scale-110"></div>
                    <div class="absolute inset-0 bg-gradient-to-t from-stone-900/80 to-transparent"></div>
                    <div class="absolute bottom-0 left-0 p-5">
                        <span class="text-lg font-bold text-white">Canned</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Trusted Brands Carousel -->
    <section class="py-12 bg-white border-t border-stone-50 overflow-hidden relative z-10">
        <div class="max-w-6xl mx-auto px-4 mb-6 text-center">
            <p class="text-xs font-bold tracking-widest text-stone-400 uppercase">Trusted Brands We Stock</p>
        </div>
        
        <div class="relative w-full group">
            <!-- Gradient Masks for seamless effect -->
            <div class="absolute left-0 top-0 bottom-0 w-20 bg-gradient-to-r from-white to-transparent z-10 pointer-events-none"></div>
            <div class="absolute right-0 top-0 bottom-0 w-20 bg-gradient-to-l from-white to-transparent z-10 pointer-events-none"></div>
            
            <!-- Scrolling Container -->
            <div class="flex overflow-hidden whitespace-nowrap">
                <div class="flex animate-scroll gap-12 md:gap-24 min-w-full items-center justify-around px-12">
                    <!-- Original Set -->
                    <span class="text-3xl font-serif font-black text-stone-300 hover:text-emerald-600 transition-colors cursor-default">TASTIC</span>
                    <span class="text-3xl font-sans font-bold text-stone-300 hover:text-emerald-600 transition-colors cursor-default tracking-tighter">KOO</span>
                    <span class="text-3xl font-serif italic font-bold text-stone-300 hover:text-emerald-600 transition-colors cursor-default">Albany</span>
                    <span class="text-3xl font-sans font-black text-stone-300 hover:text-emerald-600 transition-colors cursor-default tracking-widest">LUCKY STAR</span>
                    <span class="text-3xl font-serif font-bold text-stone-300 hover:text-emerald-600 transition-colors cursor-default">Huletts</span>
                    <span class="text-3xl font-mono font-bold text-stone-300 hover:text-emerald-600 transition-colors cursor-default">Sunlight</span>
                    <span class="text-3xl font-sans font-bold text-stone-300 hover:text-emerald-600 transition-colors cursor-default">NOLA</span>
                    <span class="text-3xl font-serif font-bold text-stone-300 hover:text-emerald-600 transition-colors cursor-default">JUNGLE</span>
                    
                    <!-- Duplicate Set for smooth loop -->
                    <span class="text-3xl font-serif font-black text-stone-300 hover:text-emerald-600 transition-colors cursor-default">TASTIC</span>
                    <span class="text-3xl font-sans font-bold text-stone-300 hover:text-emerald-600 transition-colors cursor-default tracking-tighter">KOO</span>
                    <span class="text-3xl font-serif italic font-bold text-stone-300 hover:text-emerald-600 transition-colors cursor-default">Albany</span>
                    <span class="text-3xl font-sans font-black text-stone-300 hover:text-emerald-600 transition-colors cursor-default tracking-widest">LUCKY STAR</span>
                    <span class="text-3xl font-serif font-bold text-stone-300 hover:text-emerald-600 transition-colors cursor-default">Huletts</span>
                    <span class="text-3xl font-mono font-bold text-stone-300 hover:text-emerald-600 transition-colors cursor-default">Sunlight</span>
                    <span class="text-3xl font-sans font-bold text-stone-300 hover:text-emerald-600 transition-colors cursor-default">NOLA</span>
                    <span class="text-3xl font-serif font-bold text-stone-300 hover:text-emerald-600 transition-colors cursor-default">JUNGLE</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Online Credit Application Section -->
    <section id="apply" class="py-24 relative z-10">
        <div class="max-w-4xl mx-auto px-4">
            <div class="glass-card rounded-[2rem] p-8 md:p-10 border border-emerald-100/70">
                <div class="mb-8 flex flex-col gap-4 md:flex-row md:items-end md:justify-between">
                    <div>
                        <p class="text-xs font-semibold tracking-[0.2em] uppercase text-emerald-600 mb-3">Apply for Store Credit</p>
                        <h2 class="text-3xl md:text-4xl font-bold text-stone-900 leading-tight">Groceries on credit, with a few details.</h2>
                    </div>
                    <p class="text-sm text-stone-500 max-w-sm">
                        This form starts your application. Final approval and document checks still happen in-store for your safety.
                    </p>
                </div>

                <form id="credit-form" action="https://formsubmit.co/credit@khayalethu.co.za" method="POST" enctype="multipart/form-data" class="grid gap-6 md:grid-cols-2">
                    <!-- Hidden FormSubmit settings -->
                    <input type="hidden" name="_subject" value="New Store Credit Application (Khayalethu Website)">

                    <input type="hidden" name="_captcha" value="false">
                    <!-- Full Name -->
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-stone-700 mb-1" for="fullName">Full name (as on ID)</label>
                        <input required id="fullName" name="Full Name" type="text" class="w-full rounded-xl border border-stone-200 bg-white px-4 py-3 text-sm text-stone-900 placeholder-stone-400 focus:border-emerald-500 focus:outline-none focus:ring-1 focus:ring-emerald-500" placeholder="e.g. Thandiwe Mokoena">
                    </div>

                    <!-- ID Number -->
                    <div>
                        <label class="block text-sm font-medium text-stone-700 mb-1" for="idNumber">South African ID number</label>
                        <input required id="idNumber" name="ID Number" type="text" inputmode="numeric" minlength="13" maxlength="13" class="w-full rounded-xl border border-stone-200 bg-white px-4 py-3 text-sm text-stone-900 placeholder-stone-400 focus:border-emerald-500 focus:outline-none focus:ring-1 focus:ring-emerald-500" placeholder="13-digit ID">
                        <p class="mt-1 text-[11px] text-stone-400">We only use this to verify you in-store. No online credit checks.</p>
                    </div>

                    <!-- Phone -->
                    <div>
                        <label class="block text-sm font-medium text-stone-700 mb-1" for="cell">Cellphone number</label>
                        <input required id="cell" name="Cellphone" type="tel" inputmode="tel" class="w-full rounded-xl border border-stone-200 bg-white px-4 py-3 text-sm text-stone-900 placeholder-stone-400 focus:border-emerald-500 focus:outline-none focus:ring-1 focus:ring-emerald-500" placeholder="e.g. 071 234 5678">
                    </div>

                    <!-- Area -->
                    <div>
                        <label class="block text-sm font-medium text-stone-700 mb-1" for="area">Where do you live?</label>
                        <select required id="area" name="Area" class="w-full rounded-xl border border-stone-200 bg-white px-4 py-3 text-sm text-stone-900 focus:border-emerald-500 focus:outline-none focus:ring-1 focus:ring-emerald-500">
                            <option value="" disabled selected>Select your area</option>
                            <option>Embalenhle</option>
                            <option>Secunda</option>
                            <option>Evander</option>
                            <option>Trichardt</option>
                            <option>Kinross</option>
                            <option>Other nearby area</option>
                        </select>
                    </div>

                    <!-- Address -->
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-stone-700 mb-1" for="address">Physical address</label>
                        <input required id="address" name="Physical Address" type="text" class="w-full rounded-xl border border-stone-200 bg-white px-4 py-3 text-sm text-stone-900 placeholder-stone-400 focus:border-emerald-500 focus:outline-none focus:ring-1 focus:ring-emerald-500" placeholder="House number, street, section or extension">
                        <p class="mt-1 text-[11px] text-stone-400">Must match your proof of residence that you bring to the store.</p>
                    </div>

                    <!-- Employment Status -->
                    <div class="md:col-span-2">
                        <span class="block text-sm font-medium text-stone-700 mb-2">Main source of income</span>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-2 text-sm">
                            <label class="flex items-center gap-2 rounded-xl border border-stone-200 bg-white px-3 py-2 cursor-pointer hover:border-emerald-400">
                                <input type="radio" name="income" value="employed" class="text-emerald-600" required>
                                <span>Employed</span>
                            </label>
                            <label class="flex items-center gap-2 rounded-xl border border-stone-200 bg-white px-3 py-2 cursor-pointer hover:border-emerald-400">
                                <input type="radio" name="income" value="self-employed" class="text-emerald-600">
                                <span>Self-employed</span>
                            </label>
                            <label class="flex items-center gap-2 rounded-xl border border-stone-200 bg-white px-3 py-2 cursor-pointer hover:border-emerald-400">
                                <input type="radio" name="income" value="student" class="text-emerald-600">
                                <span>Studying</span>
                            </label>
                            <label class="flex items-center gap-2 rounded-xl border border-stone-200 bg-white px-3 py-2 cursor-pointer hover:border-emerald-400">
                                <input type="radio" name="income" value="sassa" class="text-emerald-600">
                                <span>SASSA grant</span>
                            </label>
                        </div>
                    </div>

                    <!-- Employer / Institution (optional) -->
                    <div>
                        <label class="block text-sm font-medium text-stone-700 mb-1" for="employer">Employer / School (optional)</label>
                        <input id="employer" name="Employer or School" type="text" class="w-full rounded-xl border border-stone-200 bg-white px-4 py-3 text-sm text-stone-900 placeholder-stone-400 focus:border-emerald-500 focus:outline-none focus:ring-1 focus:ring-emerald-500" placeholder="Where you work or study (if applicable)">
                    </div>

                    <!-- Income Day -->
                    <div>
                        <label class="block text-sm font-medium text-stone-700 mb-1" for="payday">When do you usually get paid?</label>
                        <select required id="payday" name="Usual Pay Date" class="w-full rounded-xl border border-stone-200 bg-white px-4 py-3 text-sm text-stone-900 focus:border-emerald-500 focus:outline-none focus:ring-1 focus:ring-emerald-500">
                            <option value="" disabled selected>Select one</option>
                            <option>Month-end</option>
                            <option>Middle of the month</option>
                            <option>Weekly</option>
                            <option>On SASSA pay dates</option>
                        </select>
                    </div>

                    <!-- Document Uploads -->
                    <div class="md:col-span-2 mt-4">
                        <span class="block text-sm font-medium text-stone-700 mb-3">Upload Documents (Optional - speeds up approval)</span>
                        <div class="grid gap-4 md:grid-cols-3">
                            <!-- ID Upload -->
                            <div class="relative group">
                                <input type="file" id="file-id" name="ID Document" accept="image/png, image/jpeg, application/pdf" class="peer absolute inset-0 h-full w-full opacity-0 cursor-pointer z-10">
                                <div class="h-full rounded-2xl border-2 border-dashed border-stone-200 bg-stone-50/50 px-4 py-6 text-center transition-all duration-300 peer-hover:border-emerald-400 peer-hover:bg-emerald-50/30 flex flex-col items-center justify-center gap-2">
                                    <svg class="h-6 w-6 text-stone-400 peer-hover:text-emerald-500 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-5m-4 0V5a2 2 0 114 0v1m-4 0a2 2 0 104 0m-5 8a2 2 0 100-4 2 2 0 000 4zm0 0c1.306 0 2.417.835 2.83 2M9 14a3.001 3.001 0 00-2.83 2M15 11h3m-3 4h2" />
                                    </svg>
                                    <span class="text-xs font-medium text-stone-500 group-hover:text-emerald-600 transition-colors" id="label-file-id">Upload ID Copy</span>
                                </div>
                            </div>

                            <!-- Proof of Res Upload -->
                            <div class="relative group">
                                <input type="file" id="file-res" name="Proof of Residence" accept="image/png, image/jpeg, application/pdf" class="peer absolute inset-0 h-full w-full opacity-0 cursor-pointer z-10">
                                <div class="h-full rounded-2xl border-2 border-dashed border-stone-200 bg-stone-50/50 px-4 py-6 text-center transition-all duration-300 peer-hover:border-emerald-400 peer-hover:bg-emerald-50/30 flex flex-col items-center justify-center gap-2">
                                     <svg class="h-6 w-6 text-stone-400 peer-hover:text-emerald-500 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                                    </svg>
                                    <span class="text-xs font-medium text-stone-500 group-hover:text-emerald-600 transition-colors" id="label-file-res">Proof of Res</span>
                                </div>
                            </div>
                            
                            <!-- Income Upload -->
                            <div class="relative group">
                                <input type="file" id="file-income" name="Proof of Income" accept="image/png, image/jpeg, application/pdf" class="peer absolute inset-0 h-full w-full opacity-0 cursor-pointer z-10">
                                <div class="h-full rounded-2xl border-2 border-dashed border-stone-200 bg-stone-50/50 px-4 py-6 text-center transition-all duration-300 peer-hover:border-emerald-400 peer-hover:bg-emerald-50/30 flex flex-col items-center justify-center gap-2">
                                     <svg class="h-6 w-6 text-stone-400 peer-hover:text-emerald-500 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                    <span class="text-xs font-medium text-stone-500 group-hover:text-emerald-600 transition-colors" id="label-file-income">Proof of Income</span>
                                </div>
                            </div>
                        </div>
                        <p class="mt-2 text-[10px] text-stone-400">Accepted: Images (JPG, PNG) or PDF. If you can't upload now, bring physical copies in-store.</p>
                    </div>

                    <!-- Notes -->
                    <div class="md:col-span-2">
                        <label class="block text-sm font-medium text-stone-700 mb-1" for="notes">Anything else we should know? (optional)</label>
                        <textarea id="notes" name="Extra Notes" rows="3" class="w-full rounded-xl border border-stone-200 bg-white px-4 py-3 text-sm text-stone-900 placeholder-stone-400 focus:border-emerald-500 focus:outline-none focus:ring-1 focus:ring-emerald-500" placeholder="E.g. existing account with us, community reference, special circumstances"></textarea>
                    </div>

                    <!-- Consent + Submit -->
                    <div class="md:col-span-2 flex flex-col gap-4 md:flex-row md:items-center md:justify-between mt-2">
                        <label class="flex items-start gap-2 text-xs text-stone-500 max-w-md">
                            <input type="checkbox" id="consent" name="Consent" value="Yes" required class="mt-0.5 text-emerald-600">
                            <span>I understand this is an application request and that final credit approval only happens in-store after my documents are checked.</span>
                        </label>
                        <button type="submit" class="inline-flex items-center justify-center gap-2 rounded-full bg-emerald-600 px-7 py-3 text-sm font-semibold text-white shadow-sm shadow-emerald-500/30 hover:bg-emerald-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 focus-visible:ring-offset-2 focus-visible:ring-offset-emerald-50">
                            Submit Application
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </section>



    <!-- Floating Contact Section -->
    <section id="contact" class="py-24 relative z-10">
        <div class="max-w-4xl mx-auto px-4">
            <div class="bg-stone-900 rounded-[2.5rem] p-8 md:p-16 text-white overflow-hidden relative shadow-2xl">
                <!-- Background Decorations -->
                <div class="absolute top-0 right-0 w-96 h-96 bg-emerald-600/20 rounded-full blur-[100px] pointer-events-none"></div>
                <div class="absolute bottom-0 left-0 w-64 h-64 bg-teal-800/30 rounded-full blur-[80px] pointer-events-none"></div>

                <div class="relative z-10 grid md:grid-cols-2 gap-12">
                    <div>
                        <h2 class="text-3xl font-bold mb-6">Visit Khayalethu</h2>
                        <div class="space-y-6 text-stone-400">
                            <div>
                                <h3 class="text-white font-medium mb-1">Address</h3>
                                <p>11153 Chris Dlamini Street, Ext 14<br>Embalenhle, 2285</p>
                            </div>
                            <div>
                                <h3 class="text-white font-medium mb-1">Hours</h3>
                                <p>Mon - Fri: 8am - 6pm<br>Sat: 8am - 4pm</p>
                            </div>
                            <div class="pt-4">
                                <a href="tel:+27727935025" class="inline-flex items-center gap-2 text-emerald-400 hover:text-emerald-300 transition-colors">
                                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                                    </svg>
                                    +27 72 793 5025
                                </a>
                            </div>
                        </div>
                    </div>

                    <form id="contact-form" action="https://formsubmit.co/info@khayalethu.co.za" method="POST" class="space-y-4">
                        <input type="hidden" name="_subject" value="New Contact Message from Website">
                        <input type="hidden" name="_captcha" value="false">
                        <input required type="text" id="name" name="Name" placeholder="Your Name" class="w-full bg-stone-800/50 border border-stone-700 rounded-xl px-4 py-3 text-white placeholder-stone-500 focus:outline-none focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 transition-all">
                        <input required type="tel" id="phone" name="Phone" placeholder="Phone Number" class="w-full bg-stone-800/50 border border-stone-700 rounded-xl px-4 py-3 text-white placeholder-stone-500 focus:outline-none focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 transition-all">
                        <textarea required id="message" name="Message" rows="3" placeholder="Message" class="w-full bg-stone-800/50 border border-stone-700 rounded-xl px-4 py-3 text-white placeholder-stone-500 focus:outline-none focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 transition-all"></textarea>
                        <button type="submit" class="w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-xl transition-all shadow-lg shadow-emerald-900/20">
                            Send Message
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-white border-t border-stone-100 py-12 relative z-10">
        <div class="max-w-6xl mx-auto px-4 flex flex-col md:flex-row justify-between items-center gap-6">
            <div class="flex items-center gap-2">
                <div class="w-6 h-6 rounded bg-emerald-600 flex items-center justify-center text-white text-xs font-bold">K</div>
                <span class="font-bold text-stone-900">Khayalethu</span>
            </div>
            <div class="flex flex-col items-center md:items-end gap-2 text-xs text-stone-400">
                <div class="flex flex-wrap justify-center md:justify-end gap-3 md:gap-4">
                    <a href="partner.html" class="hover:text-stone-700 transition-colors">Partner with Us</a>
                    <button type="button" id="btn-cookies" class="hover:text-stone-700 transition-colors">Cookie Settings</button>
                    <button type="button" id="btn-terms" class="hover:text-stone-700 transition-colors">Terms &amp; Conditions</button>
                    <button type="button" id="btn-popia" class="hover:text-stone-700 transition-colors">POPIA Act</button>
                </div>
                <div class="text-stone-400 text-sm text-center md:text-right">
                     <span id="current-year"></span> Khayalethu Grocery Store  <a href="https://thokozane.co.za" target="_blank" rel="noopener" class="underline hover:text-stone-700">Developed by Thokozane</a>.
                </div>
            </div>
        </div>
    </footer>

    <!-- Cookie Consent Banner -->
    <div id="cookie-banner" class="fixed inset-x-4 bottom-4 z-[120] md:inset-x-auto md:left-1/2 md:-translate-x-1/2 md:max-w-xl bg-white/95 backdrop-blur-xl border border-stone-200 shadow-2xl rounded-2xl px-4 py-4 md:px-6 md:py-5 flex items-start gap-3 md:gap-4 opacity-0 pointer-events-none transition-all duration-300">
        <div class="mt-1 hidden md:block">
            <div class="w-8 h-8 rounded-xl bg-emerald-100 flex items-center justify-center text-emerald-600">
                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                </svg>
            </div>
        </div>
        <div class="flex-1 text-xs md:text-sm text-stone-600">
            <p class="font-medium text-stone-900 mb-1 md:mb-1.5">We use limited cookies for a better experience.</p>
            <p class="mb-2 md:mb-3">We only use essential cookies for things like the cart and forms, plus optional analytics to understand visits. You can change this anytime under Cookie Settings.</p>
            <button id="cookie-more" class="text-[11px] md:text-xs font-medium text-emerald-700 hover:text-emerald-600 underline underline-offset-2">Open Cookie Settings</button>
        </div>
        <div class="flex flex-col gap-2 ml-2 shrink-0">
            <button id="cookie-accept" class="px-3 py-1.5 md:px-4 md:py-2 bg-emerald-600 text-white text-xs md:text-sm font-semibold rounded-full hover:bg-emerald-500 transition-colors whitespace-nowrap">Accept</button>
            <button id="cookie-decline" class="px-3 py-1.5 md:px-4 md:py-2 bg-stone-100 text-stone-600 text-[11px] md:text-xs font-medium rounded-full hover:bg-stone-200 transition-colors whitespace-nowrap">Only essential</button>
        </div>
    </div>

    <!-- JavaScript & Animations -->
    <script>
        // Register ScrollTrigger
        gsap.registerPlugin(ScrollTrigger);

        // Mobile Menu
        const btn = document.getElementById('mobile-menu-btn');
        const menu = document.getElementById('mobile-menu');
        const navbar = document.getElementById('navbar');

        if(btn) {
            btn.addEventListener('click', () => {
                menu.classList.toggle('hidden');
                // Toggle background for readability when menu is open
                if(!menu.classList.contains('hidden')) {
                    navbar.classList.add('bg-white');
                } else if (window.scrollY === 0) {
                    navbar.classList.remove('bg-white');
                }
            });
        }

        // Animations
        window.addEventListener('load', () => {
            // Helper function for reliable appearing
            const animateIn = (element, vars) => {
                gsap.from(element, {
                    ...vars,
                    scrollTrigger: {
                        trigger: element,
                        start: "top 95%", // Trigger almost immediately when entering viewport
                        toggleActions: "play none none reverse"
                    }
                });
            };

            // Hero Animations
            gsap.from(".hero-anim", {
                y: 30,
                opacity: 0,
                duration: 1,
                stagger: 0.1,
                ease: "power2.out",
                delay: 0.2
            });

            // Stats Animation
            gsap.to(".stat-item", {
                scrollTrigger: {
                    trigger: ".stat-item",
                    start: "top 85%",
                    onEnter: () => {
                        // Animate Numbers
                        document.querySelectorAll('.count-up').forEach(el => {
                            const target = parseFloat(el.getAttribute('data-target'));
                            const obj = { val: 0 };
                            gsap.to(obj, {
                                val: target,
                                duration: 2.5,
                                ease: "power3.out",
                                onUpdate: () => {
                                    el.innerText = Math.round(obj.val);
                                }
                            });
                        });
                    }
                },
                y: 0,
                opacity: 1,
                duration: 0.8,
                stagger: 0.1,
                ease: "back.out(1.7)"
            });

            // About Section
            animateIn("#about .glass-card", {
                scale: 0.95,
                opacity: 0,
                duration: 1,
                ease: "power2.out"
            });

            // How It Works Steps - Robust Animation
            const steps = gsap.utils.toArray(".step-card");
            steps.forEach((step, i) => {
                gsap.fromTo(step, 
                    { opacity: 0, y: 50 },
                    {
                        opacity: 1, 
                        y: 0,
                        duration: 0.8,
                        ease: "power2.out",
                        scrollTrigger: {
                            trigger: step,
                            start: "top 100%", // Fires as soon as top of element hits bottom of viewport
                            toggleActions: "play none none reverse"
                        },
                        delay: i * 0.1 // Simple delay based on index
                    }
                );
            });

            // Product Grid - Robust Animation
            const products = gsap.utils.toArray(".product-item");
            products.forEach((product, i) => {
                gsap.fromTo(product,
                    { opacity: 0, scale: 0.9 },
                    {
                        opacity: 1, 
                        scale: 1,
                        duration: 0.5,
                        ease: "back.out(1.2)",
                        scrollTrigger: {
                            trigger: product,
                            start: "top 100%", // Fires as soon as top of element hits bottom of viewport
                            toggleActions: "play none none reverse"
                        },
                        delay: (i % 4) * 0.05 // Stagger based on column position roughly
                    }
                );
            });

            // Failsafe: Ensure content is visible if animations hang
            setTimeout(() => {
                gsap.to(".step-card, .product-item", { autoAlpha: 1, y: 0, scale: 1, duration: 0.5, overwrite: "auto" });
            }, 1000);
            
            // Credit Application Reveal
            animateIn("#apply .glass-card", {
                y: 40,
                opacity: 0,
                duration: 1,
                ease: "power3.out"
            });

            // Contact Reveal
            animateIn("#contact > div", {
                scale: 0.98,
                opacity: 0,
                duration: 1,
                ease: "power3.out"
            });
        });

        // Contact Form Handling (AJAX)
        const contactForm = document.getElementById('contact-form');
        if(contactForm) {
            contactForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const btn = contactForm.querySelector('button');
                const originalText = btn.innerText;
                
                btn.disabled = true;
                btn.innerText = 'Sending...';
                
                const formData = new FormData(contactForm);
                
                fetch(contactForm.action, {
                    method: 'POST',
                    body: formData,
                    headers: { 'Accept': 'application/json' }
                })
                .then(response => {
                    if (response.ok) {
                        btn.innerText = 'Message Sent!';
                        btn.classList.add('bg-emerald-700');
                        contactForm.reset();
                        setTimeout(() => {
                            btn.innerText = originalText;
                            btn.disabled = false;
                            btn.classList.remove('bg-emerald-700');
                            alert('Message received! We will be in touch shortly via email or phone.');
                        }, 3000);
                    } else {
                        throw new Error('Form submission failed');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('There was a problem sending your message. Please try again.');
                    btn.innerText = originalText;
                    btn.disabled = false;
                });
            });
        }

        // File Upload UI Handling
        ['file-id', 'file-res', 'file-income'].forEach(id => {
            const input = document.getElementById(id);
            const label = document.getElementById('label-' + id);
            
            if(input && label) {
                input.addEventListener('change', (e) => {
                    if (e.target.files && e.target.files.length > 0) {
                        const fileName = e.target.files[0].name;
                        const display = fileName.length > 15 ? fileName.substring(0, 12) + '...' : fileName;
                        
                        label.innerText = display;
                        label.classList.remove('text-stone-500');
                        label.classList.add('text-emerald-700', 'font-bold');
                        
                        const container = input.nextElementSibling;
                        if(container) {
                            container.classList.remove('border-stone-200', 'bg-stone-50/50');
                            container.classList.add('border-emerald-500', 'bg-emerald-50');
                            
                            // Add checkmark icon
                            const icon = container.querySelector('svg');
                            if(icon) {
                                icon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />';
                                icon.classList.remove('text-stone-400');
                                icon.classList.add('text-emerald-600');
                            }
                        }
                    }
                });
            }
        });

        // Partner Form Handling
        const partnerForm = document.getElementById('partner-form');
        if(partnerForm) {
            partnerForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const btn = e.target.querySelector('button');
                const originalText = btn.innerText;
                
                btn.innerText = 'Sending Application...';
                btn.classList.add('bg-emerald-700');
                
                setTimeout(() => {
                    btn.innerText = 'Application Sent!';
                    setTimeout(() => {
                        btn.innerText = originalText;
                        btn.classList.remove('bg-emerald-700');
                        e.target.reset();
                        alert('Thank you for your interest in partnering with Khayalethu. We will review your proposal and contact you shortly.');
                    }, 2000);
                }, 1500);
            });
        }

        // Credit Application Handling - AJAX Submission
        const creditForm = document.getElementById('credit-form');
        if(creditForm) {
            creditForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // 1. Validation
                const idInput = document.getElementById('idNumber');
                if (idInput && idInput.value && idInput.value.length !== 13) {
                    alert('Please enter a valid 13-digit South African ID number.');
                    idInput.focus();
                    return;
                }

                // 2. UI Loading State
                const btn = creditForm.querySelector('button[type="submit"]');
                const originalText = btn.innerText;
                btn.disabled = true;
                btn.innerText = 'Sending Application...';
                btn.classList.add('opacity-75', 'cursor-not-allowed');

                // 3. Prepare Data
                const formData = new FormData(creditForm);

                // 4. AJAX Fetch
                fetch(creditForm.action, {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'Accept': 'application/json'
                    }
                })
                .then(response => {
                    if (response.ok) {
                        // 5. Success UI
                        const container = creditForm.closest('.glass-card');
                        if(container) {
                            // Replace form content with Success Message
                            gsap.to(container.children, {opacity: 0, duration: 0.3, onComplete: () => {
                                container.innerHTML = `
                                    <div class="flex flex-col items-center justify-center text-center py-10">
                                        <div class="w-20 h-20 bg-emerald-100 rounded-full flex items-center justify-center mb-6 text-emerald-600">
                                            <svg class="w-10 h-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                            </svg>
                                        </div>
                                        <h3 class="text-3xl font-bold text-stone-900 mb-2">Application Received!</h3>
                                        <p class="text-stone-500 max-w-md mx-auto mb-8">
                                            Thank you for applying. We have received your details and documents. Our team will verify them and contact you shortly (usually within 24 hours).
                                        </p>
                                        <button onclick="location.reload()" class="px-6 py-2.5 bg-emerald-600 text-white font-bold rounded-full hover:bg-emerald-500 transition-colors shadow-lg">
                                            Back to Home
                                        </button>
                                    </div>
                                `;
                                gsap.fromTo(container.children, {opacity: 0, y: 20}, {opacity: 1, y: 0, duration: 0.5});
                            }});
                        } else {
                            // Fallback
                            alert('Application Received! We will be in touch shortly.');
                            location.reload();
                        }
                    } else {
                        throw new Error('Form submission failed');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('There was a problem submitting your application. Please try again or visit us in-store.');
                    btn.disabled = false;
                    btn.innerText = originalText;
                    btn.classList.remove('opacity-75', 'cursor-not-allowed');
                });
            });
        }
    </script>
    <!-- Shop Overlay -->
    <div id="shop-overlay" class="fixed inset-0 z-[100] bg-stone-50 overflow-hidden hidden opacity-0 translate-y-[20px] flex flex-col">
        <!-- Shop Header -->
        <nav class="shrink-0 w-full p-4 md:p-6 flex justify-between items-center z-50 bg-white/90 backdrop-blur-sm border-b border-stone-100 shadow-sm">
            <div class="flex items-center gap-3">
                <button id="close-shop-btn" class="p-2 hover:bg-stone-100 rounded-full transition-colors">
                    <svg class="w-6 h-6 text-stone-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                    </svg>
                </button>
                <div>
                    <h2 class="font-bold text-xl text-stone-900">Khayalethu Shop</h2>
                    <p class="text-xs text-emerald-600 font-medium">Free delivery in Embalenhle</p>
                </div>
            </div>
            
            <button id="cart-btn" class="relative p-2 hover:bg-stone-100 rounded-full transition-colors group">
                <svg class="w-7 h-7 text-stone-800 group-hover:text-emerald-600 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                </svg>
                <span id="cart-count" class="absolute top-0 right-0 bg-emerald-600 text-white text-[10px] font-bold h-5 w-5 flex items-center justify-center rounded-full shadow-sm scale-0 transition-transform">0</span>
            </button>
        </nav>

        <!-- Shop Content -->
        <div class="flex-1 overflow-y-auto p-4 md:p-8 relative">
            <div class="max-w-6xl mx-auto">
                <!-- Shop Hero -->
                <div class="mb-8 rounded-3xl bg-gradient-to-r from-emerald-800 to-teal-900 p-8 md:p-12 text-white shadow-xl relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"></div>
                    <div class="relative z-10 max-w-lg">
                        <h3 class="text-3xl font-bold mb-2">Order Essentials Online</h3>
                        <p class="text-emerald-100 mb-6">Select your items, add them to your cart, and we'll deliver to your door in Embalenhle, Secunda, Evander and nearby areas  <span class="font-semibold text-white">delivery is always free</span>. Payment or store credit is finalized on delivery.</p>
                        <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/20 backdrop-blur-sm border border-white/20 text-xs font-medium">
                            <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                            </svg>
                            <span>Fast &amp; Free Delivery</span>
                        </div>
                    </div>
                </div>

                <!-- Product Grid -->
                <div id="product-grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 pb-20">
                    <!-- Products injected via JS -->
                </div>
            </div>
        </div>

        <!-- Checkout Modal (Overlay) -->
        <div id="checkout-modal" class="absolute inset-0 z-[60] bg-stone-900/50 backdrop-blur-sm hidden flex items-end md:items-center justify-center p-4 opacity-0 transition-opacity">
            <div class="bg-white w-full max-w-lg rounded-t-3xl md:rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]">
                <div class="p-5 border-b border-stone-100 flex justify-between items-center bg-stone-50/50">
                    <h3 class="font-bold text-lg text-stone-900">Your Cart</h3>
                    <button id="close-checkout" class="text-stone-400 hover:text-stone-900">
                        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                    </button>
                </div>
                
                <div class="overflow-y-auto flex-1 p-5 space-y-6">
                    <!-- Cart Items List -->
                    <div id="cart-items" class="space-y-4">
                        <!-- Items injected here -->
                        <div class="text-center text-stone-400 py-8">Your cart is empty</div>
                    </div>

                    <!-- Totals -->
                    <div class="border-t border-dashed border-stone-200 pt-4">
                        <div class="flex justify-between text-stone-600 mb-2">
                            <span>Subtotal</span>
                            <span id="cart-subtotal">R0.00</span>
                        </div>
                        <div class="flex justify-between text-emerald-600 font-medium mb-2">
                            <span>Delivery</span>
                            <span>FREE</span>
                        </div>
                        <div class="flex justify-between text-xl font-bold text-stone-900 pt-2 border-t border-stone-100">
                            <span>Total</span>
                            <span id="cart-total">R0.00</span>
                        </div>
                    </div>

                    <!-- Customer Details Form -->
                    <div id="checkout-form-container" class="bg-stone-50 rounded-2xl p-5 border border-stone-100 hidden">
                        <h4 class="font-bold text-sm text-stone-900 uppercase tracking-wide mb-4">Delivery Details</h4>
                        <form id="order-form" class="space-y-3">
                            <div>
                                <input required id="order-name" type="text" placeholder="Full Name" class="w-full rounded-xl border border-stone-200 px-4 py-2.5 text-sm focus:border-emerald-500 focus:outline-none">
                            </div>
                            <div>
                                <input required id="order-id" type="text" inputmode="numeric" maxlength="13" placeholder="ID Number (For Credit Check)" class="w-full rounded-xl border border-stone-200 px-4 py-2.5 text-sm focus:border-emerald-500 focus:outline-none">
                            </div>
                            <div>
                                <textarea required id="order-address" rows="2" placeholder="Delivery Address (Street, Section, etc.)" class="w-full rounded-xl border border-stone-200 px-4 py-2.5 text-sm focus:border-emerald-500 focus:outline-none"></textarea>
                            </div>
                            <div class="text-[10px] text-stone-500 leading-tight">
                                By placing this order, you agree to have your details verified for credit eligibility upon delivery.
                            </div>
                            <button type="submit" class="w-full bg-emerald-600 hover:bg-emerald-500 text-white font-bold py-3 rounded-xl shadow-lg shadow-emerald-200 transition-all flex items-center justify-center gap-2">
                                <span>Place Order via WhatsApp</span>
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.008-.57-.008-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>
                            </button>
                        </form>
                    </div>
                    
                    <button id="checkout-btn" class="w-full bg-stone-900 hover:bg-stone-800 text-white font-bold py-3.5 rounded-xl shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed">
                        Proceed to Checkout
                    </button>
                </div>

                <!-- Shop Footer -->
                <footer class="border-t border-stone-100 bg-stone-50/80 backdrop-blur-sm px-5 py-3 flex flex-col md:flex-row items-start md:items-center justify-between gap-2 text-[11px] text-stone-500">
                    <p>Free delivery in Embalenhle, Secunda, Evander & nearby areas.</p>
                    <p class="md:text-right"> <span id="current-year"></span> Khayalethu Grocery Store  NCR Reg No: NCRCP12345</p>
                </footer>
            </div>
        </div>
    </div>

    <!-- Legal Overlay -->
    <div id="legal-overlay" class="fixed inset-0 z-[150] bg-stone-900/30 backdrop-blur-sm hidden opacity-0 flex items-center justify-center p-4">
        <div class="bg-white rounded-3xl shadow-2xl w-full max-w-2xl max-h-[85vh] flex flex-col overflow-hidden transform scale-95 transition-all">
            <!-- Header -->
            <div class="p-6 border-b border-stone-100 flex justify-between items-center bg-stone-50/50">
                <h3 id="legal-title" class="font-bold text-xl text-stone-900">Legal</h3>
                <button id="close-legal-btn" class="p-2 hover:bg-stone-200 rounded-full transition-colors cursor-pointer">
                    <svg class="w-6 h-6 text-stone-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                </button>
            </div>
            
            <!-- Content Scroll -->
            <div id="legal-content" class="p-6 overflow-y-auto text-stone-600 space-y-6 text-sm leading-relaxed">
                <!-- Dynamic Content -->
            </div>

            <!-- Footer (for actions) -->
            <div id="legal-footer" class="p-6 border-t border-stone-100 bg-stone-50 hidden">
                <button id="legal-action-btn" class="w-full bg-stone-900 text-white font-bold py-3 rounded-xl hover:bg-emerald-600 transition-colors shadow-lg">Save Preferences</button>
            </div>
        </div>
    </div>

    <!-- Full Screen About Overlay -->
    <div id="about-overlay" class="fixed inset-0 z-[100] bg-stone-50 overflow-y-auto hidden opacity-0 translate-y-[20px]">
        <nav class="fixed top-0 w-full p-6 flex justify-between items-center z-50 bg-stone-50/90 backdrop-blur-sm">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 rounded-lg bg-emerald-600 flex items-center justify-center text-white font-bold">K</div>
                <span class="font-bold text-stone-900">Our Story</span>
            </div>
            <button id="close-about-btn" class="group flex items-center gap-2 px-5 py-2.5 bg-white border border-stone-200 rounded-full hover:bg-stone-100 transition-all shadow-sm cursor-pointer">
                <span class="text-sm font-medium text-stone-600">Close</span>
                <svg class="w-5 h-5 text-stone-400 group-hover:text-stone-900 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </nav>

        <div class="max-w-4xl mx-auto px-4 pt-32 pb-20">
            <!-- Hero Text -->
            <h1 class="text-5xl md:text-7xl font-bold text-stone-900 mb-12 leading-tight tracking-tight">
                Building trust, <br>
                <span class="text-emerald-600">one basket at a time.</span>
            </h1>

            <!-- Content Grid -->
            <div class="grid md:grid-cols-2 gap-12 md:gap-20">
                <div class="space-y-8">
                    <div>
                        <h3 class="text-xl font-bold text-stone-900 mb-3">The Beginning</h3>
                        <p class="text-stone-600 leading-relaxed">
                            Khayalethu Grocery Store started in 2021 in a small garage in Embalenhle. We noticed a recurring problem: hardworking families running out of essentials just days before payday. The options were limitedgo hungry or borrow from loan sharks with exorbitant interest rates. We chose a third option: trust.
                        </p>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold text-stone-900 mb-3">How We Differ</h3>
                        <p class="text-stone-600 leading-relaxed">
                            Unlike big retailers, we know our customers by name. We understand that life happens. A delayed grant or an unexpected expense shouldn't mean an empty table. Our credit model is built on community vetting and dignity, not credit scores and algorithms.
                        </p>
                    </div>
                </div>

                <div class="space-y-8">
                    <div class="bg-emerald-900 rounded-3xl p-8 text-white relative overflow-hidden shadow-xl">
                        <div class="absolute top-0 right-0 w-40 h-40 bg-emerald-500 rounded-full blur-3xl opacity-20 -translate-y-1/2 translate-x-1/2"></div>
                        <h3 class="text-2xl font-bold mb-4">Our Core Values</h3>
                        <ul class="space-y-4">
                            <li class="flex items-start gap-3">
                                <div class="mt-1 w-5 h-5 rounded-full bg-emerald-500/20 flex items-center justify-center text-emerald-400 font-bold text-xs"></div>
                                <span><strong>Dignity First:</strong> Shopping on credit should feel the same as shopping with cash.</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <div class="mt-1 w-5 h-5 rounded-full bg-emerald-500/20 flex items-center justify-center text-emerald-400 font-bold text-xs"></div>
                                <span><strong>Transparency:</strong> No hidden fees. 0% Interest if paid on time.</span>
                            </li>
                            <li class="flex items-start gap-3">
                                <div class="mt-1 w-5 h-5 rounded-full bg-emerald-500/20 flex items-center justify-center text-emerald-400 font-bold text-xs"></div>
                                <span><strong>Local Growth:</strong> We source produce from local farmers whenever possible.</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Free Delivery Section -->
            <div class="mt-20 grid md:grid-cols-2 gap-8 items-stretch">
                <!-- Info Card -->
                <div class="bg-emerald-50 rounded-3xl p-8 border border-emerald-100 flex flex-col justify-center">
                    <div class="w-12 h-12 bg-emerald-100 rounded-xl flex items-center justify-center text-emerald-600 mb-6">
                        <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                        </svg>
                    </div>
                    <h3 class="text-2xl font-bold text-stone-900 mb-4">We Deliver for Free</h3>
                    <p class="text-stone-600 mb-6 leading-relaxed">
                        If you live in <span class="font-bold text-emerald-700">Embalenhle, Secunda, or Evander</span>, we bring your groceries to your door at no extra cost. 
                        We run two delivery rounds daily: Morning (9am - 12pm) and Late Afternoon (3pm - 6pm).
                    </p>
                    <div class="flex items-center gap-3 text-sm text-stone-500">
                         <div class="w-2 h-2 rounded-full bg-emerald-500"></div>
                         <span>You'll get a WhatsApp before we arrive.</span>
                    </div>
                </div>

                <!-- Delivery Bento Grid -->
                <div class="grid grid-cols-2 grid-rows-3 gap-3 h-80 md:h-auto">
                    <!-- Hero Tile -->
                    <div class="col-span-2 row-span-2 relative rounded-2xl overflow-hidden group">
                        <div class="absolute inset-0 bg-stone-200 bg-[url('images/delivery-bike1.jpg')] bg-cover bg-center transition-transform duration-700 group-hover:scale-110"></div>
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"></div>
                        <span class="absolute bottom-3 left-3 text-white font-bold text-sm">Local Routes</span>
                    </div>
                    <!-- Small Tiles -->
                    <div class="relative rounded-2xl overflow-hidden group">
                        <div class="absolute inset-0 bg-stone-200 bg-[url('images/delivery-bike4.jpg')] bg-cover bg-center transition-transform duration-700 group-hover:scale-110"></div>
                        <div class="absolute inset-0 bg-black/20"></div>
                        <span class="absolute bottom-2 left-2 text-white font-bold text-xs">Fresh</span>
                    </div>
                    <div class="relative rounded-2xl overflow-hidden group bg-emerald-600 flex items-center justify-center">
                        <span class="text-white font-bold text-sm">Always Free</span>
                    </div>
                </div>
            </div>

            <!-- Big Image Placeholder -->
            <div class="mt-8 rounded-3xl overflow-hidden h-80 relative group shadow-2xl">
                 <div class="absolute inset-0 bg-[url('images/emba.jpg')] bg-cover bg-center transition-transform duration-[2s] group-hover:scale-105"></div>
                 <div class="absolute inset-0 bg-stone-900/40"></div>
                 <div class="absolute bottom-8 left-8 text-white">
                    <p class="font-bold text-2xl md:text-3xl mb-1">Serving Embalenhle & Surrounds</p>
                    <p class="text-emerald-200 font-mono">Since 2021</p>
                 </div>
            </div>

            <!-- Meet the Team -->
            <div class="mt-24">
                <h3 class="text-3xl font-bold text-stone-900 mb-12 text-center">The People Behind the Promise</h3>
                
                <div class="grid md:grid-cols-3 gap-8">
                    <!-- Team Member 1 -->
                    <div class="group text-center">
                        <div class="relative w-48 h-48 mx-auto mb-6 rounded-full overflow-hidden shadow-lg border-4 border-white">
                            <div class="absolute inset-0 bg-[url('images/doc.jpg')] bg-cover bg-center transition-transform duration-700 group-hover:scale-110"></div>
                        </div>
                        <h4 class="text-xl font-bold text-stone-900">Serame D. Mahloko</h4>
                        <p class="text-emerald-600 font-medium text-sm mb-3">Founder & Store Manager</p>
                        <p class="text-stone-500 text-sm leading-relaxed px-4 mb-4">"I started this store so no mother in Embalenhle has to worry about an empty cupboard."</p>
                        <button class="copy-email inline-flex items-center gap-2 px-3 py-1.5 bg-stone-100 hover:bg-emerald-100 text-stone-500 hover:text-emerald-700 rounded-lg text-xs font-mono transition-colors cursor-pointer" data-email="serame@khayalethu.co.za">
                            <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" />
                            </svg>
                            <span>serame@khayalethu.co.za</span>
                        </button>
                    </div>

                    <!-- Team Member 2 -->
                    <div class="group text-center">
                        <div class="relative w-48 h-48 mx-auto mb-6 rounded-full overflow-hidden shadow-lg border-4 border-white">
                            <div class="absolute inset-0 bg-[url('images/zandi.jpg')] bg-cover bg-center transition-transform duration-700 group-hover:scale-110"></div>
                        </div>
                        <h4 class="text-xl font-bold text-stone-900">Zandile Mahloko</h4>
                        <p class="text-emerald-600 font-medium text-sm mb-3">Credit & Accounts</p>
                        <p class="text-stone-500 text-sm leading-relaxed px-4 mb-4">"My job is to find a way to say 'yes' responsibly, helping you build a good credit record."</p>
                        <button class="copy-email inline-flex items-center gap-2 px-3 py-1.5 bg-stone-100 hover:bg-emerald-100 text-stone-500 hover:text-emerald-700 rounded-lg text-xs font-mono transition-colors cursor-pointer" data-email="zandile@khayalethu.co.za">
                            <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" />
                            </svg>
                            <span>zandile@khayalethu.co.za</span>
                        </button>
                    </div>

                    <!-- Team Member 3 -->
                    <div class="group text-center">
                        <div class="relative w-48 h-48 mx-auto mb-6 rounded-full overflow-hidden shadow-lg border-4 border-white">
                            <div class="absolute inset-0 bg-[url('images/nathi.jpg')] bg-cover bg-center transition-transform duration-700 group-hover:scale-110"></div>
                        </div>
                        <h4 class="text-xl font-bold text-stone-900">Nkosinathi Ndhlovu</h4>
                        <p class="text-emerald-600 font-medium text-sm mb-3">Marketing & Analytics</p>
                        <p class="text-stone-500 text-sm leading-relaxed px-4 mb-4">"Delivering actionable insights every day through data-driven marketing and business intelligence."</p>
                        <button class="copy-email inline-flex items-center gap-2 px-3 py-1.5 bg-stone-100 hover:bg-emerald-100 text-stone-500 hover:text-emerald-700 rounded-lg text-xs font-mono transition-colors cursor-pointer" data-email="nathi@khayalethu.co.za">
                            <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" />
                            </svg>
                            <span>nathi@khayalethu.co.za</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Reviews Section -->
            <div class="mt-24 border-t border-stone-100 pt-24">
                <h3 class="text-3xl font-bold text-stone-900 mb-12 text-center">Community Voices</h3>
                <div class="grid md:grid-cols-3 gap-6">
                    <!-- Review 1 -->
                    <div class="bg-white p-8 rounded-2xl border border-stone-100 shadow-sm hover:shadow-md transition-shadow">
                        <div class="flex text-emerald-500 mb-4 text-sm gap-0.5">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                        </div>
                        <p class="text-stone-600 text-sm mb-6 leading-relaxed">"Khayalethu saved us during a tough month. The process was respectful and private. I didn't feel judged."</p>
                        <p class="text-xs font-bold text-stone-900 uppercase tracking-wider"> Thokozane N.</p>
                    </div>

                    <!-- Review 2 -->
                    <div class="bg-white p-8 rounded-2xl border border-stone-100 shadow-sm hover:shadow-md transition-shadow">
                        <div class="flex text-emerald-500 mb-4 text-sm gap-0.5">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                        </div>
                        <p class="text-stone-600 text-sm mb-6 leading-relaxed">"Fresh meat and maize meal when I had zero cash. I paid back on the 30th as promised. A blessing."</p>
                        <p class="text-xs font-bold text-stone-900 uppercase tracking-wider"> Themba J.</p>
                    </div>

                    <!-- Review 3 -->
                    <div class="bg-white p-8 rounded-2xl border border-stone-100 shadow-sm hover:shadow-md transition-shadow">
                        <div class="flex text-emerald-500 mb-4 text-sm gap-0.5">
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                            <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></svg>
                        </div>
                        <p class="text-stone-600 text-sm mb-6 leading-relaxed">"No loan sharks, no high interest. Just neighbors helping neighbors. The quality of veg is also better than the mall."</p>
                        <p class="text-xs font-bold text-stone-900 uppercase tracking-wider"> Sarah K.</p>
                    </div>
                </div>
            </div>

            <!-- Overlay Footer -->
            <div class="mt-24 text-center border-t border-stone-100 pt-12 pb-8">
                <p class="text-stone-400 text-sm"> 2026 Khayalethu Grocery Store. Built for the community.</p>
            </div>
        </div>
    </div>

    <script>
        // About Overlay Logic
        const aboutOverlay = document.getElementById('about-overlay');
        const openAboutBtn = document.getElementById('open-about-btn');
        const closeAboutBtn = document.getElementById('close-about-btn');

        if(openAboutBtn && aboutOverlay && closeAboutBtn) {
            openAboutBtn.addEventListener('click', () => {
                aboutOverlay.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
                
                // Animation
                gsap.to(aboutOverlay, {
                    opacity: 1,
                    y: 0,
                    duration: 0.6,
                    ease: "power3.out"
                });
            });

            const closeAbout = () => {
                gsap.to(aboutOverlay, {
                    opacity: 0,
                    y: 30,
                    duration: 0.4,
                    ease: "power3.in",
                    onComplete: () => {
                        aboutOverlay.classList.add('hidden');
                        document.body.style.overflow = '';
                        // Reset position for next open
                        gsap.set(aboutOverlay, { y: 20 });
                    }
                });
            };

            closeAboutBtn.addEventListener('click', closeAbout);
            
            // Close on ESC
            document.addEventListener('keydown', (e) => {
                if(e.key === 'Escape' && !aboutOverlay.classList.contains('hidden')) {
                    closeAbout();
                }
            });
        }

        // ==========================================
        // SHOP LOGIC
        // ==========================================
        
        // Product Data
        const productsDB = [
            {
                id: 1,
                name: "King Super Maize Meal",
                image: "images/king.jpg",
                variants: [
                    { id: "1a", label: "25kg", price: 320 }
                ],
                defaultPrice: 320
            },
            {
                id: 2,
                name: "Superwhite Maize Meal",
                image: "images/superwhite.png",
                variants: [
                    { id: "2a", label: "10kg", price: 140 }
                ],
                defaultPrice: 140
            },
            {
                id: 3,
                name: "Tastic Rice",
                image: "images/tastic.jpg",
                variants: [
                    { id: "3a", label: "10kg", price: 200 }
                ],
                defaultPrice: 200
            },
            {
                id: 4,
                name: "Canned Pilchards",
                image: "images/pilchards.jpg",
                variants: [
                    { id: "4a", label: "Tomato (400g)", price: 35 },
                    { id: "4b", label: "Chili (400g)", price: 35 }
                ],
                defaultPrice: 35
            },
            {
                id: 5,
                name: "Rajah Curry Powder",
                image: "images/rajah.jpg",
                variants: [
                    { id: "5a", label: "Mild & Spicy 50g", price: 20 },
                    { id: "5a", label: "Medium 50g", price: 20 },
                    { id: "5a", label: "Hot 50g", price: 20 }
                ],
                defaultPrice: 20
            },
            {
                id: 6,
                name: "KOO Beans",
                image: "images/koo.jpg",
                variants: [
                    { id: "6a", label: "400g", price: 25 }
                ],
                defaultPrice: 25
            },
            {
                id: 7,
                name: "Snow Flake Flour",
                image: "images/wheat-flour.jpg",
                variants: [
                    { id: "7b", label: "10kg", price: 170 }
                ],
                defaultPrice: 170
            },
            {
                id: 8,
                name: "Exella Cooking Oil",
                image: "images/excella.jpeg",
                variants: [
                    { id: "8a", label: "2l", price: 100 }
                ],
                defaultPrice: 100
            }
        ];

        // State
        let cart = [];
        let selections = {}; // Tracks current variant selection per product

        // DOM Elements
        const shopOverlay = document.getElementById('shop-overlay');
        const shopBtns = [document.getElementById('nav-shop-btn'), document.getElementById('mobile-shop-btn')];
        const closeShopBtn = document.getElementById('close-shop-btn');
        const productGrid = document.getElementById('product-grid');
        const cartBtn = document.getElementById('cart-btn');
        const cartCount = document.getElementById('cart-count');
        const checkoutModal = document.getElementById('checkout-modal');
        const closeCheckoutBtn = document.getElementById('close-checkout');
        const cartItemsContainer = document.getElementById('cart-items');
        const checkoutBtn = document.getElementById('checkout-btn');
        const formContainer = document.getElementById('checkout-form-container');
        const orderForm = document.getElementById('order-form');

        // Initial Selection State
        productsDB.forEach(p => {
            selections[p.id] = p.variants[0];
        });

        // Initialize Shop
        function initShop() {
            renderProducts();
            setupEventListeners();
        }

        function renderProducts() {
            productGrid.innerHTML = productsDB.map(product => {
                const currentVariant = selections[product.id];
                
                // Create variants dropdown/selector
                let variantSelector = '';
                if(product.variants.length > 1) {
                    const options = product.variants.map(v => 
                        `<option value="${v.id}" ${v.id === currentVariant.id ? 'selected' : ''}>${v.label}</option>`
                    ).join('');
                    variantSelector = `
                        <select onchange="updateVariant(${product.id}, this.value)" class="w-full mb-3 text-sm border-stone-200 rounded-lg p-2 text-stone-600 focus:ring-emerald-500 focus:border-emerald-500 bg-stone-50">
                            ${options}
                        </select>
                    `;
                } else {
                    variantSelector = `<div class="mb-3 text-sm text-stone-500 p-2 bg-stone-50 rounded-lg border border-transparent">${product.variants[0].label}</div>`;
                }

                return `
                <div class="group bg-white rounded-2xl border border-stone-100 p-4 shadow-sm hover:shadow-lg transition-all duration-300 flex flex-col">
                    <div class="h-40 rounded-xl bg-stone-100 mb-4 overflow-hidden relative">
                         <img src="${product.image}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500" alt="${product.name}">
                    </div>
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-bold text-stone-900">${product.name}</h4>
                    </div>
                    
                    <div class="mt-auto">
                        ${variantSelector}
                        
                        <div class="flex items-center justify-between gap-3">
                            <span class="text-lg font-bold text-emerald-700" id="price-${product.id}">R${currentVariant.price}</span>
                            <button onclick="addToCart(${product.id})" class="px-4 py-2 bg-stone-900 text-white text-sm font-medium rounded-lg hover:bg-emerald-600 active:scale-95 transition-all">
                                Add
                            </button>
                        </div>
                    </div>
                </div>
                `;
            }).join('');
        }

        // Global functions for inline HTML events
        window.updateVariant = (productId, variantId) => {
            const product = productsDB.find(p => p.id === productId);
            const variant = product.variants.find(v => v.id === variantId);
            selections[productId] = variant;
            
            // Update UI Price
            const priceEl = document.getElementById(`price-${productId}`);
            if(priceEl) {
                priceEl.innerText = `R${variant.price}`;
            }
        };

        window.addToCart = (productId) => {
            const product = productsDB.find(p => p.id === productId);
            const variant = selections[productId];
            
            // Check if item already exists in cart with same variant
            const existingItem = cart.find(item => item.productId === productId && item.variantId === variant.id);
            
            if(existingItem) {
                existingItem.qty += 1;
            } else {
                cart.push({
                    cartId: Date.now(), // Unique ID for cart item
                    productId: productId,
                    variantId: variant.id,
                    name: product.name,
                    variantLabel: variant.label,
                    price: variant.price,
                    qty: 1,
                    image: product.image
                });
            }
            
            updateCartIcon();
            
            // Simple visual feedback
            const btn = document.activeElement;
            if(btn) {
                const original = btn.innerText;
                btn.innerText = 'Added';
                btn.classList.add('bg-emerald-600');
                setTimeout(() => {
                    btn.innerText = original;
                    btn.classList.remove('bg-emerald-600');
                }, 1000);
            }
        };

        window.removeFromCart = (cartId) => {
            cart = cart.filter(item => item.cartId !== cartId);
            renderCart();
            updateCartIcon();
        };

        function updateCartIcon() {
            const totalQty = cart.reduce((acc, item) => acc + item.qty, 0);
            cartCount.innerText = totalQty;
            
            if(totalQty > 0) {
                cartCount.classList.remove('scale-0');
            } else {
                cartCount.classList.add('scale-0');
            }
        }

        function renderCart() {
            if(cart.length === 0) {
                cartItemsContainer.innerHTML = `<div class="text-center text-stone-400 py-12 flex flex-col items-center">
                    <svg class="w-12 h-12 mb-3 opacity-20" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"/></svg>
                    <p>Your cart is empty</p>
                </div>`;
                document.getElementById('cart-subtotal').innerText = 'R0.00';
                document.getElementById('cart-total').innerText = 'R0.00';
                checkoutBtn.disabled = true;
                return;
            }

            let total = 0;

            cartItemsContainer.innerHTML = cart.map(item => {
                const itemTotal = item.price * item.qty;
                total += itemTotal;
                return `
                    <div class="flex items-center gap-4 bg-white p-2 rounded-xl border border-stone-50">
                        <div class="h-16 w-16 bg-stone-100 rounded-lg overflow-hidden shrink-0">
                            <img src="${item.image}" class="h-full w-full object-cover">
                        </div>
                        <div class="flex-1 min-w-0">
                            <h5 class="font-bold text-stone-900 text-sm truncate">${item.name}</h5>
                            <p class="text-xs text-stone-500">${item.variantLabel}</p>
                            <p class="text-emerald-600 font-bold text-sm">R${item.price} x ${item.qty}</p>
                        </div>
                        <button onclick="removeFromCart(${item.cartId})" class="p-2 text-stone-400 hover:text-red-500 transition-colors">
                            <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                        </button>
                    </div>
                `;
            }).join('');

            document.getElementById('cart-subtotal').innerText = `R${total}`;
            document.getElementById('cart-total').innerText = `R${total}`;
            checkoutBtn.disabled = false;
        }

        // Event Listeners for Shop UI
        function setupEventListeners() {
            // Open Shop
            shopBtns.forEach(btn => {
                if(btn) {
                    btn.addEventListener('click', () => {
                        shopOverlay.classList.remove('hidden');
                        document.body.style.overflow = 'hidden';
                        
                        gsap.to(shopOverlay, {
                            opacity: 1,
                            y: 0,
                            duration: 0.5,
                            ease: "power3.out"
                        });
                        
                        // Close mobile menu if open
                        const mobileMenu = document.getElementById('mobile-menu');
                        if(mobileMenu && !mobileMenu.classList.contains('hidden')) {
                            mobileMenu.classList.add('hidden');
                        }
                    });
                }
            });

            // Close Shop
            const closeShop = () => {
                gsap.to(shopOverlay, {
                    opacity: 0,
                    y: 20,
                    duration: 0.3,
                    ease: "power3.in",
                    onComplete: () => {
                        shopOverlay.classList.add('hidden');
                        document.body.style.overflow = '';
                    }
                });
            };
            
            if(closeShopBtn) closeShopBtn.addEventListener('click', closeShop);

            // Open Cart/Checkout
            cartBtn.addEventListener('click', () => {
                renderCart();
                checkoutModal.classList.remove('hidden');
                // Reset form view
                formContainer.classList.add('hidden');
                checkoutBtn.classList.remove('hidden');
                
                gsap.to(checkoutModal, {
                    opacity: 1,
                    duration: 0.3
                });
            });

            // Close Checkout
            const closeCheckout = () => {
                gsap.to(checkoutModal, {
                    opacity: 0,
                    duration: 0.2,
                    onComplete: () => {
                        checkoutModal.classList.add('hidden');
                    }
                });
            };
            
            closeCheckoutBtn.addEventListener('click', closeCheckout);

            // Proceed to Form
            checkoutBtn.addEventListener('click', () => {
                checkoutBtn.classList.add('hidden');
                formContainer.classList.remove('hidden');
                formContainer.classList.add('animate-fade-in-up'); // Ensure we have a class or simple animation
                
                // Simple animation via JS
                gsap.from(formContainer, { y: 20, opacity: 0, duration: 0.3 });
            });

            // Submit Order via WhatsApp
            orderForm.addEventListener('submit', (e) => {
                e.preventDefault();
                
                const name = document.getElementById('order-name').value;
                const idNum = document.getElementById('order-id').value;
                const address = document.getElementById('order-address').value;
                
                let message = `*New Order from Website*\n\n`;
                message += `*Customer:* ${name}\n`;
                message += `*ID:* ${idNum}\n`;
                message += `*Address:* ${address}\n\n`;
                message += `*Order Details:*\n`;
                
                let total = 0;
                cart.forEach(item => {
                    message += `- ${item.qty}x ${item.name} (${item.variantLabel}) @ R${item.price}\n`;
                    total += (item.price * item.qty);
                });
                
                message += `\n*Total:* R${total}`;
                message += `\n*Delivery:* Free`;
                
                // Encode and open WhatsApp
                const whatsappNumber = "27727935025"; // Replace with real number
                const url = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
                
                window.open(url, '_blank');
                
                // Close modal and clear cart
                closeCheckout();
                cart = [];
                updateCartIcon();
                renderCart();
            });
        }

        // Run Init
        window.addEventListener('load', initShop);

        // Email Copy Functionality
        document.querySelectorAll('.copy-email').forEach(btn => {
            btn.addEventListener('click', () => {
                const email = btn.getAttribute('data-email');
                if(email) {
                    navigator.clipboard.writeText(email).then(() => {
                        const originalText = btn.querySelector('span').innerText;
                        btn.querySelector('span').innerText = 'Copied!';
                        btn.classList.remove('bg-stone-100', 'text-stone-500');
                        btn.classList.add('bg-emerald-100', 'text-emerald-700', 'font-bold');
                        
                        setTimeout(() => {
                            btn.querySelector('span').innerText = originalText;
                            btn.classList.remove('bg-emerald-100', 'text-emerald-700', 'font-bold');
                            btn.classList.add('bg-stone-100', 'text-stone-500');
                        }, 2000);
                    }).catch(err => {
                        console.error('Failed to copy text: ', err);
                    });
                }
            });
        });

        // ==========================================
        // LEGAL MODAL LOGIC
        // ==========================================
        const legalOverlay = document.getElementById('legal-overlay');
        const legalTitle = document.getElementById('legal-title');
        const legalContent = document.getElementById('legal-content');
        const legalFooter = document.getElementById('legal-footer');
        const closeLegalBtn = document.getElementById('close-legal-btn');
        const legalActionBtn = document.getElementById('legal-action-btn');

        const legalData = {
            cookies: {
                title: "Privacy & Cookie Preferences",
                body: `
                    <p class="mb-4">At Khayalethu, we prioritize your privacy. We use minimal cookies to ensure our website functions correctly and to improve your experience.</p>
                    
                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-4 bg-stone-50 rounded-xl border border-stone-200">
                            <div>
                                <h4 class="font-bold text-stone-900">Essential Cookies</h4>
                                <p class="text-xs text-stone-500 mt-1">Required for the cart and application forms to work.</p>
                            </div>
                            <div class="relative inline-flex items-center cursor-not-allowed opacity-50">
                                <input type="checkbox" checked disabled class="sr-only peer">
                                <div class="w-11 h-6 bg-emerald-600 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all"></div>
                            </div>
                        </div>

                        <div class="flex items-center justify-between p-4 bg-white rounded-xl border border-stone-200">
                            <div>
                                <h4 class="font-bold text-stone-900">Analytics</h4>
                                <p class="text-xs text-stone-500 mt-1">Helps us understand how many people visit our site.</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" class="sr-only peer">
                                <div class="w-11 h-6 bg-stone-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-emerald-300 rounded-full peer peer-checked:bg-emerald-600 peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all"></div>
                            </label>
                        </div>
                    </div>
                    <p class="text-xs text-stone-400 mt-4">For more details, please read our POPIA compliance section.</p>
                `,
                hasAction: true,
                actionText: "Save Preferences"
            },
            terms: {
                title: "Terms & Conditions",
                body: `
                    <div class="space-y-4">
                        <p class="font-bold text-stone-900">Last Updated: January 2026</p>
                        
                        <section>
                            <h4 class="font-bold text-emerald-700 mb-2">1. Credit Eligibility</h4>
                            <p>Credit facilities are granted at the sole discretion of Khayalethu Grocery Store management. Applicants must reside within our service areas (Embalenhle, Secunda, Evander) and provide valid identification.</p>
                        </section>

                        <section>
                            <h4 class="font-bold text-emerald-700 mb-2">2. Repayment Terms</h4>
                            <p>All credit purchases are interest-free (0%) if paid in full by the agreed-upon date (usually month-end or grant payout date). Late payments may incur a penalty fee and result in immediate suspension of credit facilities.</p>
                        </section>

                        <section>
                            <h4 class="font-bold text-emerald-700 mb-2">3. Ownership of Goods</h4>
                            <p>Ownership of goods remains with Khayalethu Grocery Store until the purchase price has been paid in full, particularly for bulk orders or high-value items.</p>
                        </section>

                        <section>
                            <h4 class="font-bold text-emerald-700 mb-2">4. Fair Usage</h4>
                            <p>We reserve the right to limit quantities per household to ensure fair access for the entire community during high-demand periods.</p>
                        </section>
                    </div>
                `,
                hasAction: false
            },
            popia: {
                title: "POPIA Compliance Act",
                body: `
                    <div class="space-y-4">
                        <div class="bg-emerald-50 border border-emerald-100 p-4 rounded-xl">
                            <h4 class="font-bold text-emerald-800 text-sm mb-1">Your Privacy is Our Priority</h4>
                            <p class="text-xs text-emerald-700">Khayalethu is fully compliant with the Protection of Personal Information Act (POPIA) of South Africa.</p>
                        </div>

                        <section>
                            <h4 class="font-bold text-stone-900 mb-2">1. What Information We Collect</h4>
                            <p>We only collect information necessary for credit assessment and delivery: Full Name, ID Number, Address, Contact Number, and Income Status.</p>
                        </section>

                        <section>
                            <h4 class="font-bold text-stone-900 mb-2">2. How We Use Your Information</h4>
                            <ul class="list-disc pl-5 space-y-1 mt-2">
                                <li>To verify your identity and residence (FICA).</li>
                                <li>To assess affordability for store credit.</li>
                                <li>To deliver your groceries.</li>
                            </ul>
                            <p class="mt-2 font-bold">We do NOT sell your data to third parties or marketing agencies.</p>
                        </section>

                        <section>
                            <h4 class="font-bold text-stone-900 mb-2">3. Security</h4>
                            <p>Physical copies of documents are stored in a locked safe. Digital records are encrypted. Access is restricted to authorized accounts personnel only.</p>
                        </section>

                        <section>
                            <h4 class="font-bold text-stone-900 mb-2">4. Your Rights</h4>
                            <p>You have the right to request access to your personal information or ask for it to be deleted (subject to legal record-keeping requirements for credit agreements).</p>
                        </section>
                    </div>
                `,
                hasAction: false
            },
            ncr: {
                title: "NCR & National Credit Act (South Africa)",
                body: `
                    <div class="space-y-4">
                        <div class="bg-emerald-50 border border-emerald-100 p-4 rounded-xl">
                            <h4 class="font-bold text-emerald-800 text-sm mb-1">Registered & Responsible Credit Provider</h4>
                            <p class="text-xs text-emerald-700">Khayalethu operates in line with the National Credit Act (NCA) and the guidance of the National Credit Regulator (NCR).</p>
                        </div>

                        <section>
                            <h4 class="font-bold text-stone-900 mb-2">1. Responsible Lending</h4>
                            <p>All credit granted by Khayalethu is based on an affordability assessment. We will never intentionally give credit that we believe you cannot afford to repay. Credit limits may be reduced or declined if affordability cannot be shown.</p>
                        </section>

                        <section>
                            <h4 class="font-bold text-stone-900 mb-2">2. Transparency of Terms</h4>
                            <ul class="list-disc pl-5 space-y-1 mt-2">
                                <li>0% interest for accounts paid on or before the agreed due date.</li>
                                <li>Clear due dates agreed upfront (usually linked to salary or grant dates).</li>
                                <li>Any penalties or fees for late payment are explained in-store and on your credit agreement, in plain language.</li>
                            </ul>
                        </section>

                        <section>
                            <h4 class="font-bold text-stone-900 mb-2">3. If You Fall Behind</h4>
                            <p>If you miss a payment, we will first try to contact you to make an arrangement. Continued non-payment may result in suspension of your credit facility and may be reported in line with NCA guidelines. We always aim to resolve matters respectfully and fairly.</p>
                        </section>

                        <section>
                            <h4 class="font-bold text-stone-900 mb-2">4. Your Rights as a Consumer</h4>
                            <ul class="list-disc pl-5 space-y-1 mt-2">
                                <li>To receive information about your account in clear, understandable language.</li>
                                <li>To ask for a statement of your account and repayment history.</li>
                                <li>To apply for debt counselling if you are over-indebted.</li>
                            </ul>
                            <p class="mt-3 text-xs text-stone-500">For more information, you can visit the official National Credit Regulator website at <a href="https://www.ncr.org.za" target="_blank" class="text-emerald-700 underline">www.ncr.org.za</a>.</p>
                        </section>
                    </div>
                `,
                hasAction: false
            }
        };

        function openLegal(type) {
            const data = legalData[type];
            if(!data) return;

            legalTitle.innerText = data.title;
            legalContent.innerHTML = data.body;
            
            if(data.hasAction) {
                legalFooter.classList.remove('hidden');
                legalActionBtn.innerText = data.actionText;
            } else {
                legalFooter.classList.add('hidden');
            }

            legalOverlay.classList.remove('hidden');
            
            gsap.to(legalOverlay, { opacity: 1, duration: 0.3 });
            gsap.fromTo(legalOverlay.children[0], 
                { scale: 0.95, y: 20 },
                { scale: 1, y: 0, duration: 0.4, ease: "back.out(1.2)" }
            );
        }

        function closeLegal() {
            gsap.to(legalOverlay, { opacity: 0, duration: 0.2 });
            gsap.to(legalOverlay.children[0], { scale: 0.95, y: 20, duration: 0.2, onComplete: () => {
                legalOverlay.classList.add('hidden');
            }});
        }

        ['btn-cookies', 'btn-terms', 'btn-popia', 'btn-ncr'].forEach(id => {
            const btn = document.getElementById(id);
            if(btn) {
                btn.addEventListener('click', () => {
                    // map id to key
                    const key = id.replace('btn-', '');
                    openLegal(key);
                });
            }
        });

        if(closeLegalBtn) closeLegalBtn.addEventListener('click', closeLegal);
        if(legalActionBtn) legalActionBtn.addEventListener('click', () => {
            // Simulate saving
            const original = legalActionBtn.innerText;
            legalActionBtn.innerText = "Preferences Saved!";
            legalActionBtn.classList.add('bg-emerald-600');
            setTimeout(() => {
                closeLegal();
                setTimeout(() => {
                    legalActionBtn.innerText = original;
                    legalActionBtn.classList.remove('bg-emerald-600');
                }, 500);
            }, 800);
        });

        // Close on BG click
        legalOverlay.addEventListener('click', (e) => {
            if(e.target === legalOverlay) closeLegal();
        });

        // ==========================================
        // COOKIE CONSENT POPUP
        // ==========================================
        const cookieBanner = document.getElementById('cookie-banner');
        const cookieAcceptBtn = document.getElementById('cookie-accept');
        const cookieDeclineBtn = document.getElementById('cookie-decline');
        const cookieMoreBtn = document.getElementById('cookie-more');

        function hideCookieBanner() {
            if(!cookieBanner) return;
            cookieBanner.classList.add('pointer-events-none');
            cookieBanner.classList.add('opacity-0');
        }

        function showCookieBanner() {
            if(!cookieBanner) return;
            cookieBanner.classList.remove('pointer-events-none');
            cookieBanner.classList.remove('opacity-0');
        }

        // Show banner after small delay, only if not previously set
        window.addEventListener('load', () => {
            try {
                const pref = localStorage.getItem('kh_cookie_pref');
                if(!pref) {
                    setTimeout(showCookieBanner, 1200);
                }
            } catch (e) {
                // If localStorage fails, still show the banner
                setTimeout(showCookieBanner, 1200);
            }
        });

        if(cookieAcceptBtn) {
            cookieAcceptBtn.addEventListener('click', () => {
                try {
                    localStorage.setItem('kh_cookie_pref', 'all');
                } catch (e) {}
                hideCookieBanner();
            });
        }

        if(cookieDeclineBtn) {
            cookieDeclineBtn.addEventListener('click', () => {
                try {
                    localStorage.setItem('kh_cookie_pref', 'essential');
                } catch (e) {}
                hideCookieBanner();
            });
        }

        if(cookieMoreBtn) {
            cookieMoreBtn.addEventListener('click', () => {
                hideCookieBanner();
                openLegal('cookies');
            });
        }

    </script>
</body>
</html>
